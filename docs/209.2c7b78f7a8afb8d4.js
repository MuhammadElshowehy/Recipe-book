"use strict";(self.webpackChunkAngularProject=self.webpackChunkAngularProject||[]).push([[209],{9209:(Y,g,p)=>{p.r(g),p.d(g,{RecipesModule:()=>L});var o=p(433),s=p(1196),e=p(8256),m=p(5496),d=p(6895);const _=function(i){return[i]};let Z=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-recipe-item"]],inputs:{recipe:"recipe",index:"index"},decls:10,vars:9,consts:[["routerLinkActive","active",1,"list-group-item","clearfix",2,"cursor","pointer",3,"routerLink"],[1,"row"],[1,"pull-left","col-xs-9"],[1,"list-group-item-heading"],[1,"list-group-item-text"],[1,"pull-right","col-xs-3"],[1,"img-responsive",2,"max-height","55px","min-height","55px","width","80px",3,"src","alt"]],template:function(t,n){1&t&&(e.TgZ(0,"a",0)(1,"div",1)(2,"div",2)(3,"h4",3),e._uU(4),e.ALo(5,"titlecase"),e.qZA(),e.TgZ(6,"h4",4),e._uU(7),e.qZA()(),e.TgZ(8,"div",5),e._UZ(9,"img",6),e.qZA()()()),2&t&&(e.Q6J("routerLink",e.VKq(7,_,n.index)),e.xp6(4),e.hij(" ",e.lcZ(5,5,n.recipe.name)," "),e.xp6(3),e.hij(" ",n.recipe.desc," "),e.xp6(2),e.s9C("alt",n.recipe.name),e.Q6J("src",n.recipe.imgPath,e.LSH))},dependencies:[s.rH,s.Od,d.rS],styles:["a[_ngcontent-%COMP%]{z-index:0!important}"]}),i})();function C(i,r){if(1&i&&e._UZ(0,"app-recipe-item",5),2&i){const n=r.index;e.Q6J("recipe",r.$implicit)("index",n)}}const R=function(){return["./new"]};let T=(()=>{class i{constructor(t){this.recipeService=t,this.recipes=[]}ngOnInit(){this.recipes=this.recipeService.getRecipes(),this.obs=this.recipeService.recipesChanged.subscribe(t=>{this.recipes=t})}ngOnDestroy(){this.obs.unsubscribe()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(m.j))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-recipe-list"]],decls:8,vars:3,consts:[[1,"row"],[1,"col-xs-12"],[1,"btn","btn-success","newRecipe",3,"routerLink"],[1,"row",2,"margin-bottom","10px"],[3,"recipe","index",4,"ngFor","ngForOf"],[3,"recipe","index"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"button",2),e._uU(3,"Create a new recipe"),e.qZA()()(),e._UZ(4,"hr"),e.TgZ(5,"div",3)(6,"div",1),e.YNc(7,C,1,2,"app-recipe-item",4),e.qZA()()),2&t&&(e.xp6(2),e.Q6J("routerLink",e.DdM(2,R)),e.xp6(5),e.Q6J("ngForOf",n.recipes))},dependencies:[s.rH,d.sg,Z],styles:[".newRecipe[_ngcontent-%COMP%]{width:100%}"]}),i})(),I=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-recipes"]],decls:5,vars:0,consts:[[1,"row"],[1,"list","col-md-5"],[1,"detail","col-md-7"]],template:function(t,n){1&t&&(e.TgZ(0,"section",0)(1,"div",1),e._UZ(2,"app-recipe-list"),e.qZA(),e.TgZ(3,"div",2),e._UZ(4,"router-outlet"),e.qZA()())},dependencies:[s.lC,T],styles:[".spinner[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}"]}),i})();function A(i,r){1&i&&(e.TgZ(0,"h3"),e._uU(1,"Select a recipe!"),e.qZA())}let x=(()=>{class i{constructor(t){this.recipeService=t,this.recipesFound=!1}ngOnInit(){this.recipeService.recipesChanged.subscribe(t=>{t&&(this.recipesFound=!0)})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(m.j))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-recipe-start"]],decls:1,vars:1,consts:[[4,"ngIf"]],template:function(t,n){1&t&&e.YNc(0,A,2,0,"h3",0),2&t&&e.Q6J("ngIf",n.recipesFound)},dependencies:[d.O5]}),i})();var u=p(4442);let b=(()=>{class i{constructor(t){this.elRef=t,this.isOpen=!1}toggleOpen(t){this.isOpen=!!this.elRef.nativeElement.contains(t.target)&&!this.isOpen}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.SBq))},i.\u0275dir=e.lG2({type:i,selectors:[["","appDropdown",""]],hostVars:2,hostBindings:function(t,n){1&t&&e.NdJ("click",function(a){return n.toggleOpen(a)},!1,e.evT),2&t&&e.ekj("open",n.isOpen)}}),i})();function w(i,r){1&i&&(e.TgZ(0,"p"),e._uU(1,"Recipe ingredients:"),e.qZA())}function F(i,r){if(1&i&&(e.TgZ(0,"li",15),e._uU(1),e.qZA()),2&i){const t=r.$implicit;e.xp6(1),e.AsE(" ",t.name," (",t.amount,") ")}}const y=function(){return["./edit"]};let S=(()=>{class i{constructor(t,n,c,a){this.recipeService=t,this.route=n,this.router=c,this.saveFetchRecipesAndIngredientsService=a}ngOnInit(){this.route.params.subscribe(t=>{this.id=+t.id,this.recipe=this.recipeService.getRecipe(this.id),this.hasIngredients=this.recipe.ingredients.length>0})}addToShoppingList(){this.recipeService.addIngredientToShoppingList(this.recipe.ingredients),this.saveFetchRecipesAndIngredientsService.saveIngredients()}onDelete(){this.recipeService.deleteRecipe(this.id),this.router.navigate(["/recipes"]),this.saveFetchRecipesAndIngredientsService.saveRecipes()}scrollUp(){scrollTo({top:0,behavior:"smooth"})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(m.j),e.Y36(s.gz),e.Y36(s.F0),e.Y36(u.I))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-recipe-detail"]],decls:32,vars:10,consts:[[1,"row"],[1,"col-xs-12"],[1,"img-responsive",2,"width","100%","height","400px",3,"src","alt"],[2,"margin","10px 0"],[1,"col-xs-12",2,"margin","0"],[1,"col-xs-12",2,"margin","10px 0"],["appDropdown","",1,"btn-group","manage"],["type","button",1,"btn","btn-primary","dropdown-toggle"],[1,"caret"],[1,"dropdown-menu","manage"],[3,"click"],[3,"routerLink","click"],[4,"ngIf"],[1,"list-group"],["class","list-group-item",4,"ngFor","ngForOf"],[1,"list-group-item"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"img",2),e.qZA()(),e.TgZ(3,"div",0)(4,"div",1)(5,"h1",3),e._uU(6),e.ALo(7,"titlecase"),e.qZA()()(),e.TgZ(8,"div",0)(9,"p",4),e._uU(10),e.qZA()(),e.TgZ(11,"div",0)(12,"div",5)(13,"div",6)(14,"button",7),e._uU(15," Manage recipe "),e._UZ(16,"span",8),e.qZA(),e.TgZ(17,"ul",9)(18,"li")(19,"a",10),e.NdJ("click",function(){return n.addToShoppingList()}),e._uU(20,"Add ingredients to shopping list"),e.qZA()(),e.TgZ(21,"li")(22,"a",11),e.NdJ("click",function(){return n.scrollUp()}),e._uU(23,"Edit recipe"),e.qZA()(),e.TgZ(24,"li")(25,"a",10),e.NdJ("click",function(){return n.onDelete()}),e._uU(26,"Delete recipe"),e.qZA()()()()()(),e.TgZ(27,"div",0)(28,"div",1),e.YNc(29,w,2,0,"p",12),e.TgZ(30,"ul",13),e.YNc(31,F,2,2,"li",14),e.qZA()()()),2&t&&(e.xp6(2),e.Q6J("src",n.recipe.imgPath,e.LSH)("alt",n.recipe.name),e.xp6(4),e.Oqu(e.lcZ(7,7,n.recipe.name)),e.xp6(4),e.hij(" ",n.recipe.desc," "),e.xp6(12),e.Q6J("routerLink",e.DdM(9,y)),e.xp6(7),e.Q6J("ngIf",n.hasIngredients),e.xp6(2),e.Q6J("ngForOf",n.recipe.ingredients))},dependencies:[s.rH,b,d.sg,d.O5,d.rS],styles:[".img-responsive[_ngcontent-%COMP%]{border:1px solid gray}.dropdown-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{cursor:pointer}.manage[_ngcontent-%COMP%], .manage[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}"]}),i})();function q(i,r){1&i&&(e.TgZ(0,"span"),e._uU(1," This name already exists! "),e.qZA())}function U(i,r){if(1&i&&(e.TgZ(0,"span"),e._uU(1," Recipe name is required! "),e.YNc(2,q,2,0,"span",9),e.qZA()),2&i){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",t.recipeForm.get("name").errors.nameIsFound)}}function O(i,r){1&i&&(e.TgZ(0,"span"),e._uU(1," Image path is required! "),e.qZA())}function M(i,r){1&i&&(e.TgZ(0,"span"),e._uU(1," Recipe description is required! "),e.qZA())}function N(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",22)(1,"div",23)(2,"label",24),e._uU(3),e.qZA(),e._UZ(4,"input",25),e.qZA(),e.TgZ(5,"div",26)(6,"label",27),e._uU(7,"Amount"),e.qZA(),e._UZ(8,"input",28),e.qZA(),e.TgZ(9,"div",29)(10,"label",30),e._uU(11,"Del"),e.qZA(),e.TgZ(12,"button",31),e.NdJ("click",function(){const a=e.CHM(t).index,l=e.oxw();return e.KtG(l.removeIngredient(a))}),e._uU(13," X "),e.qZA()()()}if(2&i){const t=r.index;e.Q6J("formGroupName",t),e.xp6(3),e.hij("Ingredient: ",t+1,"")}}let h=(()=>{class i{constructor(t,n,c,a){this.route=t,this.recipeService=n,this.router=c,this.saveFetchRecipesAndIngredientsService=a,this.recipes=[],this.editMode=!1}ngOnInit(){this.recipes=this.recipeService.getRecipes(),this.route.params.subscribe(t=>{t.id&&(this.id=+t.id,this.editMode=!0),this.initForm()})}initForm(){let t="",n="",c="",a=new o.Oe([]);if(this.editMode){const l=this.recipeService.getRecipe(this.id);if(t=l.name,n=l.imgPath,c=l.desc,l.ingredients)for(let v of l.ingredients)a.push(new o.cw({name:new o.NI(v.name,o.kI.required),amount:new o.NI(v.amount,[o.kI.required,o.kI.pattern(/^[1-9]+[0-9]*$/)])}))}this.recipeForm=new o.cw({name:new o.NI(t,[o.kI.required,this.nameValidate.bind(this)]),imgPath:new o.NI(n,o.kI.required),desc:new o.NI(c,o.kI.required),ingredients:a})}addIngredient(){const t=new o.cw({name:new o.NI(null,o.kI.required),amount:new o.NI(null,[o.kI.required,o.kI.pattern(/^[1-9]+[0-9]*$/)])});this.recipeForm.get("ingredients").push(t)}nameValidate(t){if(this.recipes)for(let n of this.recipes)if(n.name===t.value.trim()&&!1===this.editMode)return{nameIsFound:!0}}removeIngredient(t){this.recipeForm.get("ingredients").removeAt(t)}get ingredientsControls(){return this.recipeForm.get("ingredients").controls}onSubmit(){this.editMode?this.recipeService.updateRecipe(this.id,this.recipeForm.value):this.recipeService.addRecipe(this.recipeForm.value),this.saveFetchRecipesAndIngredientsService.saveRecipes(),this.onCancel()}onCancel(){this.editMode=!1,this.router.navigate(["../"],{relativeTo:this.route})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(s.gz),e.Y36(m.j),e.Y36(s.F0),e.Y36(u.I))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-recipe-edit"]],decls:44,vars:9,consts:[[1,"row","form",2,"margin-bottom","10px"],[1,"col-xs-12"],[1,"editRecipe"],[3,"formGroup","ngSubmit"],[1,"row"],[1,"form-group"],["for","name"],["type","text","id","name","formControlName","name",1,"form-control"],["recipeName",""],[4,"ngIf"],["for","imgPath"],["type","url","id","imgPath","formControlName","imgPath",1,"form-control"],["imgPath",""],[1,"img-responsive",3,"src","alt"],["for","description"],["type","text","id","description","rows","5","formControlName","desc",1,"form-control"],["formArrayName","ingredients",1,"col-xs-12"],["class","row",3,"formGroupName",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-primary",2,"width","100%",3,"click"],[1,"col-xs-12","saveCancel"],["type","submit",1,"btn","btn-success",2,"margin-right","10px",3,"disabled"],["type","button",1,"btn","btn-danger",3,"click"],[1,"row",3,"formGroupName"],[1,"col-xs-8","form-group"],["for","ingredient"],["type","text","id","ingredient","formControlName","name",1,"form-control"],[1,"col-xs-2","form-group"],["for","amount"],["type","number","id","amount","formControlName","amount",1,"form-control"],[1,"col-xs-2","form-group","remove"],["for","remove",2,"display","block"],["type","button","id","remove",1,"btn","btn-danger",3,"click"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h3",2),e._uU(3),e.qZA(),e.TgZ(4,"form",3),e.NdJ("ngSubmit",function(){return n.onSubmit()}),e.TgZ(5,"div",4)(6,"div",1)(7,"div",5)(8,"label",6),e._uU(9,"Name"),e.qZA(),e._UZ(10,"input",7,8),e.YNc(12,U,3,1,"span",9),e.qZA()()(),e.TgZ(13,"div",4)(14,"div",1)(15,"div",5)(16,"label",10),e._uU(17,"Image Path"),e.qZA(),e._UZ(18,"input",11,12),e.YNc(20,O,2,0,"span",9),e.qZA()()(),e.TgZ(21,"div",4)(22,"div",1)(23,"div",5),e._UZ(24,"img",13),e.qZA()()(),e.TgZ(25,"div",4)(26,"div",1)(27,"div",5)(28,"label",14),e._uU(29,"Description"),e.qZA(),e._UZ(30,"textarea",15),e.YNc(31,M,2,0,"span",9),e.qZA()()(),e.TgZ(32,"div",4)(33,"div",16),e.YNc(34,N,14,2,"div",17),e.TgZ(35,"div")(36,"button",18),e.NdJ("click",function(){return n.addIngredient()}),e._uU(37," Add ingredient "),e.qZA()()()(),e.TgZ(38,"div",4)(39,"div",19)(40,"button",20),e._uU(41," Save "),e.qZA(),e.TgZ(42,"button",21),e.NdJ("click",function(){return n.onCancel()}),e._uU(43," Cancel "),e.qZA()()()()()()),2&t){const c=e.MAs(19);e.xp6(3),e.hij(" ",n.editMode?"Edit Recipe":"Create New Recipe"," "),e.xp6(1),e.Q6J("formGroup",n.recipeForm),e.xp6(8),e.Q6J("ngIf",n.recipeForm.get("name").invalid&&n.recipeForm.get("name").touched),e.xp6(8),e.Q6J("ngIf",n.recipeForm.get("imgPath").invalid&&n.recipeForm.get("imgPath").touched),e.xp6(4),e.Q6J("src",c.value,e.LSH)("alt",c.name),e.xp6(7),e.Q6J("ngIf",n.recipeForm.get("desc").invalid&&n.recipeForm.get("desc").touched),e.xp6(3),e.Q6J("ngForOf",n.ingredientsControls),e.xp6(6),e.Q6J("disabled",n.recipeForm.invalid)}},dependencies:[o._Y,o.Fj,o.wV,o.JJ,o.JL,o.sg,o.u,o.x0,o.CE,d.sg,d.O5],styles:[".row[_ngcontent-%COMP%]{margin-bottom:20px}.remove[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;flex-direction:column}.saveCancel[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:20px}.saveCancel[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:50%}input.ng-invalid.ng-touched[_ngcontent-%COMP%], textarea.ng-invalid.ng-touched[_ngcontent-%COMP%]{border:1.5px solid red}span[_ngcontent-%COMP%]{color:red}.editRecipe[_ngcontent-%COMP%]{color:#337ab7;text-align:center}"]}),i})(),f=(()=>{class i{constructor(t,n){this.saveFetchRecipesAndIngredientsService=t,this.recipesService=n}resolve(t,n){let c=this.recipesService.getRecipes();return void 0===c?this.saveFetchRecipesAndIngredientsService.fetchRecipes():c}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(u.I),e.LFG(m.j))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const P=[{path:"",canActivate:[p(3870).a],component:I,children:[{path:"",component:x},{path:"new",component:h},{path:":id",component:S,resolve:[f]},{path:":id/edit",component:h,resolve:[f]}]}];let J=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[s.Bz.forChild(P),s.Bz]}),i})();var D=p(4466);let L=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[o.UX,J,D.m]}),i})()}}]);